<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>FEstivaAll</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Bootstrap icons-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
      rel="stylesheet"
      type="text/css"
    />
    <!-- Google fonts-->
    <link
      href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic"
      rel="stylesheet"
      type="text/css"
    />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="../css/style.css" rel="stylesheet" />
    <link href="../css/calenderStyle.css" rel="stylesheet" />
  </head>
  <body>
    <!-- <nav class="navbar navbar-expand-lg fixed-top bg-light navbar-light">
      <div class="container">
        <a class="navbar-brand" href="#"
          >FestivALL</a>
        <button
          class="navbar-toggler"
          type="button"
          data-mdb-toggle="collapse"
          data-mdb-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto align-items-center">
            <li class="nav-item">
              <a class="nav-link mx-2" href="#!"> Festivals</a>
            </li>
            <li class="nav-item">
              <a class="nav-link mx-2" href="#!"> Map</a>
            </li>
            <li class="nav-item">
              <a class="nav-link mx-2" href="#!">Featured</a>
            </li>
    
            <li class="nav-item">
              <a class="nav-link mx-2" href="#!">About Us</a>
            </li>
            <li class="nav-item ms-3">
              <a class="btn btn-black btn-rounded" href="#!"> <i class="bi bi-box-arrow-in-right"> </i> Sign out</a> 
            </li>
          </ul>
        </div>
      </div>
    </nav> -->
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top bg-light navbar-light">
      <div class="container">
        <a class="navbar-brand" href="#">FestivALL</a>
        <button
          class="navbar-toggler"
          type="button"
          data-mdb-toggle="collapse"
          data-mdb-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto align-items-center">
            <li class="nav-item">
              <a class="nav-link mx-2 text-primary" href="HomePage.html">
                Home</a
              >
            </li>

            <li class="nav-item">
              <a class="nav-link mx-2" href="Interactive.html"> Map</a>
            </li>
            <li class="nav-item">
              <a class="nav-link mx-2" href="Featured.html">Featured</a>
            </li>

            <li class="nav-item">
              <a class="nav-link mx-2" href="MyEvent.html">MyEvent</a>
            </li>
            <li class="nav-item ms-3">
              <a class="btn btn-black btn-rounded" href="LandingPage.html">
                <i class="bi bi-box-arrow-in-right"> </i> Sign out</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Navbar -->

    <!-- Masthead-->
    <header class="masthead">
      <div class="container position-relative">
        <div class="row justify-content-center">
          <div class="col-xl-6">
            <div class="text-center text-white">
              <!-- Page heading-->
              <h1 class="mb-5">
                Generate more leads with a professional landing page!
              </h1>
           
            </div>
          </div>
        </div>
      </div>
    </header>
    <!-- Icons Grid-->
    <section class="features-icons bg-light text-center">
      <div class="container-fluid">
        <div class="row g-0">
          <div class="col-lg-8 text-start">
            <!-- Heading -->
            <h3 class="mb-4 pl-4" style="margin-left: 15px;">Festival This month</h3>
            <!-- Event cards container here -->
            <div class="container w-100">
              <!-- event cards -->
              <!-- Flex container -->
              <div class="card flex flex-column">
                <div id="eventContainer"></div>
           
              </div>
            </div>
          </div>

          <div class="col-lg-4 px-4">
            <h3 class="text-start mb-4">Calender</h3>
            <div id="calendar"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer-->
    <footer class="footer bg-light">
      <div class="container">
        <div class="row">
          <div class="col-lg-6 h-100 text-center text-lg-start my-auto">
            <ul class="list-inline mb-2">
              <li class="list-inline-item"><a href="#!">About</a></li>
              <li class="list-inline-item">⋅</li>
              <li class="list-inline-item"><a href="#!">Contact</a></li>
              <li class="list-inline-item">⋅</li>
              <li class="list-inline-item"><a href="#!">Terms of Use</a></li>
              <li class="list-inline-item">⋅</li>
              <li class="list-inline-item"><a href="#!">Privacy Policy</a></li>
            </ul>
            <p class="text-muted small mb-4 mb-lg-0">
              &copy; Your Website 2023. All Rights Reserved.
            </p>
          </div>
          <div class="col-lg-6 h-100 text-center text-lg-end my-auto">
            <ul class="list-inline mb-0">
              <li class="list-inline-item me-4">
                <a href="#!"><i class="bi-facebook fs-3"></i></a>
              </li>
              <li class="list-inline-item me-4">
                <a href="#!"><i class="bi-twitter fs-3"></i></a>
              </li>
              <li class="list-inline-item">
                <a href="#!"><i class="bi-instagram fs-3"></i></a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min.js"></script>
    <!-- Core theme JS-->
    <script src="../js/scripts.js"></script>
    <script src="../js/calenderScripts.js"></script>
    <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
    <!-- * *                               SB Forms JS                               * *-->
    <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
    <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
    <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>

    <script>
      document
        .getElementById("myForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          // Convert form data to JSON
          const formData = new FormData(event.target);
          const jsonObject = {};
          formData.forEach((value, key) => {
            jsonObject[key] = value;
          });
          const jsonData = JSON.stringify(jsonObject);
          console.log(jsonData);

          // POST JSON data to a certain URL
          const url = "http://192.168.175.22:8000/festival/festivities/";
          fetch(url, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: jsonData,
          })
            .then((response) => {
              if (!response.ok) {
                throw new Error("Network response was not ok");
              }
              return response.json();
            })
            .then((data) => {
              console.log("Response:", data);
              // Do something with the response
            })
            .catch((error) => {
              console.error("Error:", error);
              // Handle errors
            });
        });
    </script>
    <script>
      {

        const eventContainer = document.getElementById('eventContainer');

        // Function to fetch data
        function fetchData() {
          fetch("http://192.168.175.22:8000/festival/festivities/") // URL to your Django endpoint
            .then((response) => {
              if (!response.ok) {
                throw new Error("Network response was not ok");
              }
              return response.json();
            })
            .then((data) => {
              data.forEach((item) => {
                const eventDiv = document.createElement("div");
                eventDiv.classList.add("card", "flex", "flex-row");

                // Construct inner HTML for the div
                eventDiv.innerHTML = `
        <div class="img-container w-1">
            <img src="../assets/holi.jpg" class="card-img-top w-15 object-fit" alt="Holi image" style="width: 200px">
        </div>
        <div class="card-body text-start">
            <h2 class="card-title">${item.name}</h2>
            <div class="row">
                <div class="col-4">
                    <p><i class="bi bi-calendar"></i> ${item.start_date}</p>
                </div>
                <div class="col-6">
                    <p><i class="bi bi-calendar"></i> ${item.end_date}</p>
                </div>
                <input type="text" name="name" value="${item.name}" hidden>
                <input type="date" name="end_date" value="${item.end_date}" hidden>
                <input type="date" name="start_date" value="${item.start_date}" hidden>
            </div>
            <p class="card-text">${item.description}</p>
            <div class="d-flex">
                <button class="btn btn-primary">Add to Calendar</button>
                <a href="EventDetail.html" class="btn text-primary">View Details</a>
            </div>
        </div>
    `;

                // Append the created div to the container
                eventContainer.appendChild(eventDiv);
              });
              // Do something with the data
            })
            .catch((error) => {
              console.error("Error:", error);
              // Handle errors
            });
        }

        // Call the fetchData function when the page loads
        document.addEventListener("DOMContentLoaded", fetchData);
      }
    </script>
  </body>
</html>
